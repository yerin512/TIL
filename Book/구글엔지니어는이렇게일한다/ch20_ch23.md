


정적 분석 

프로그래밍을 돌리지 않고 미리..
Eslint, 
아이디에서 경고 띄워주는 것도 정적 분석기로 볼 수 있을 것 같다.
잘 만들려고 어떻게 하냐? 코드가 많아져도 동작 잘 해야한다.
속도 문제!

일단 개발자에게 유용해야 함. 안 그럼 그냥 꺼버리거든.

큰 회사 가면 엄청 많이 쓴다.
코드 클라이밋? 코드를 분석해서 점수 매기는 것.



의존성 관리
외부 라이브러리에 의존하는 게 맞냐 - 경각심
되게 쉬운 라이브러리였는데 그 라이브러리가 서비스 종료하고 나서
프로젝트 마비가 된 곳들이 많음…

큰 회사에서는 의존을 안 한다. 
Node.js같은 것을 다운 받아서 한다.

내가 버전ㄴ 픽스한다고 되는 게 아니다.
브라우저에 따라 다를 수 있으니까.



대규모 변경을 위한 시스템을 준비해놔야하는 것.

그걸 위해 인프라팀이 관리를 한다.
전체적인 시스템을 알고있고 마이그레이션을 알고있다.
개별 팀이 하기엔 어렵다.


지속적 통합

빠르게 진화하는 지속적으로 테스트하고 통합
요즘은 CI/CD로 붙여서 부른다.
리베이스 자동화
테스트가 많아지면 제약이 많아지기 떄문에
이를 위해 다양한 테스트 전략을 세워야 한다.
실패를 했다고 아예 못하게 아닌… 실패 관리.
테스트를 전부 돌리는 게 아니라 코드를 머지하기 전에는 변경한 것만 테스트하고
머지하고 나서는 전체 다 테스트 하는.
배포할 때 여러개 의존할 때 있다.
서버가 안 되면 클라이언트가 안 됨.
서버에 의존하는 테스트를 작성하기엔 너무 깨지기가 쉬워서
가짜 서버를 만들어서 하기도 한다.

설정 테스트?
consul
환경변수 저장하는 서비스


기능 플래그

CODESOOM_STUDY=true
CODESOOM_STUDY=false
어떤 서비스… 코드숨 스터디
그게 펄스야.
그럼 그 서비스를 안 보여줌.

배포와 출시는 다르다.
서버에 새로운 버전을 설치했지만, 출시하진 않아.
출시하고 싶으면 플래그를 켜.
11시ㅣㅣ 떙 배포.
아이디 찾기 눌렀을 떄 if date === 11시면

그래야 지속적인 배포가 가능하게 됨.


깃은 배포 전략도구가 아ㅣ기에 깃플로우 전략은 지양해야한다.

서비스를 하면서 새로운 프레임워크로
대규모 변경 or 대규모 리팩터링 을 하려면 어떻게 진행하는 편인지?!

예를 들면, 현재 실제로 서비스 중인데
리액트를 넥스트로 마이그레이션 한다던가..
이사도 계속 해야하는데, 실서비스에도 추가적인 기능을 계속해야한다면

작은 회사는 마이그레이션만을 위한 별도 팀을 만들수 없을텐데…

병합충돌도 많을거고 테스트도 다시 작성해야할텐데!


CI를 어느정도로 진행하는지? 속도 너무 느린데 어떻게 대응하는지?



—

우리가 이렇게 변합니다. 를 발표
영향도를 조사해서 계획을 세운다.


컬리가 php에서 Next.js로 이사
리액트에서 넥스트로 바꾸는 것보다 더 크다.

제일 먼저
아이디 찾기

기존 쿼리가 오면
기존 서버로 간다.

멤버 파인드 아이디로 오는 건 새로운 서버로 오게 한다.

대규모 마이그레이션은 대부분 실패함.
새로운 기능이 들어오기 때문에
이사할 시간이 없다.
압박을 견딜 수가 없다.
일단 중단하고 마이그레이션 하고 한다.

하나씩 ㄷ갈아타는 전략…


—

유지하느 비용도 공짜는 아니다.
그 비용을 계산했을 떄 뭐가 더 맞냐.
빅뱅을 싸게 본다.
압박이 없을 거라 간과하기 떄문이다.


이사를 하고 있어요
주문 페이지에 뭘 좀 해줘.
주문 페이지가 옛날거야.
나중에 해주면 안 되나?
절대 안 된다.
옮기는게 오래걸려서 두번 작업하게 된다.


여기 들어갈 코드들을 라이브러리화한다.
npm으로 올리는 거ㅑㅇ.


———————



Code climate

Pull request 올리면 댓글 달아준다.
얘네가 코드리뷰를 달아준다.
중복코드 있으면 발견해줘서 이거 맞아? 달아준다. 점수도 매겨준다.
이 코드를 유지보수하는데 2년 걸려!


/

CI
규모가 커지는 거에 따라서 전략을 세워야한다.
Action example

20개는 a가 하고 20개는 b가 하고
환경을 여러 다르게 할수있다.
mac에서 돌리게할 수 있고
window환경에서 돌리게 할 수 있고
여러개 돌릴 수 있다.

시간마다 돌릴 수도 있다. 버전 체크해서 ….

ci 여러 도구들이 있다.
Was code pipeline이라든지…
하나하나 단계가 바뀔 수 있는데 거기서 거기다.

Circleci 같은것도 있따.
젠긴스?

—
의존성
Npm install 의존성 fail


라이브러리가 제대로 동작하는 테스트를 짜야함.
목킹해서 테스트 레이어를 두 개를 만들어.
라이브러리가 우리가 기대했던 대로 제대로 동작하는지 테스트 하나. 목킹해서 하나.

api도 마찬가지로
모킹해서 하나. 실제 Api 테스트도 하나.
이어지게 만들고 싶으면
서버테스트로만든 타입 만들면
그걸 목킹 타입으로 쓰고…

테스트 주도 개발로 배우는 객체 지향 설계와 실천

