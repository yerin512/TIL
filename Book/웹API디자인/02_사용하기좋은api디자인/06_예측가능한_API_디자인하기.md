# 예측 가능한 API 디자인하기

- 일관성을 유지하여 직관적인 API 만들기
- 사용 간소화 및 사용 적응 기능을 추가하기
- 사용자 가이드를 위한 메타데이터와 메타골 추가

예측가능한 api만드는 방법은? 165페이지
과거 경험했던 것과 유사하게 만들거나 사용자의 의도에 맞게 만들거나 제대로 사용할 수 있도록 정보를 제공함


1. 일관성 유지하기
2. 적응 가능하게 하기
3. 탐색 가능하게 하기


## 6.1 일관성 유지하기

### 6.1.1 일관된 데이터 디자인하기
데이터는 API의 핵심임. 리소스, 파라미터, 리스폰스, 프로퍼티는 API를 빚어내는 요소들임.
이 모든 요소의 의미를 컨슈머가 쉽게 이해할 수 있도록 이름, 타입, 포맷, 조직화에 심혈을 기울여야함.

같은 컨셉을 여러가지 다른 이름으로 표현해야한다면 유사한 것을 선택해야한다.

데이터는 특정 데이터 타입에 대한 포맷이 정해졌다면 같은 데이터 타입은 모두 같은 포맷을 적용하는 게 좋다.

url은 각 계층은 항상 같은 뜻을 포함하는 게 좋다.

api에 국한된게 아니라 입력과 출력값에 대한 구조화된 데이터도 충분히 패턴으로 표현가능

네이밍 컨벤션을 정했따면 엄격하게 따라야한다.
속성의 이름, 쿼리 파라미터의 이름, 코드, 제이슨 스키마 등 정의할 때.

### 6.1.2 일관적인 목표 디자인하기 
169페이지

목표들도 일관되어야한다.

질문: Rest API는 무엇 때문에 프로그래밍적 표현이 일관적으로 구성될까? 169페이지
- HTTP프로토콜을 바탕으로 표현되기 때문에 
같은 HTTP 메서드를 사용한다 


목표의 입력값들도 일관적이어야한다.

성공이나 실패 피드백을 응답으로 반환할 때도 일관성은 지켜져야한다.

에러 메시지에도 적용되어야한다.

일관성은 단순히 api형태 뿐만 아니라작동 방식에도 영향을 미침.
일관된 목표 흐름을 생성하도록 api를 디자인해야함.

### 6.1.3 일관성의 4단계
171페이지

- 1단계 : API 내부에 일관성이 존재
- 2단계 : 팀 API / 회사 / 조직 간의 일관성이 존재
- 3단계 : 도메인 간의 API의 일관성이 존재
- 4단계 : 외부 세계와 일관성이 존재

### 6.1.4 타인을 따라하자 : 일반적인 관행과 표준을 준수하기

질문: 표준을 준수하는 이유는?
173페이지
컨슈머가 의미에 익숙할 가능성이 있으므로 표준을 사용하면 이해가 쉬워짐
또한 이경우 api의 데이터는 표준을 따른느 다른 api에서도 쉽게 수용할 수 있어 api가 가진 상호 운용성도 크게 증가할 것임.

질문 : rest api가 문서화된 http 프로토콜의 규칙만 준수하면 일관성을 가질 수 있는 이유?
174페이지
기본적으로 모든 http 프로토콜은 (특히 http 메서드와 http 상태코드) rest api에 대한 일관된 프레임워크를 제공하여 온전히 예측 가능하게 해줌.
rest 아키텍쳐 스타일 정의 : 모든 상호작용은 식별된 리소스를 대상으로 리소스 상태와 표준 메서드를 통해서만 유발되어야한다.


175페이지 문제
색상을 표현할 때 웹 개발자가 선호하는 표준 :rgb
명시적인 http 상태코드를 이용해 다음 상황을 표현해보세요.

### 6.1.5 유지하기 어렵고 현명하게 적용해야하는 일관성

일관성은 중요하지만 그 대가로 사용성을 저해시키거나 상식에 반대되어서는 안 된다.
떄로는 일관성에 치중하면 유연성이 떨어지고 디자인 프로세스가 엄청나게 복잡해져 일관성만 있고 사용할 수 조차 없는 api가 될수도 있다는 걸 개닫게 될 것이다.

때로 주어진 컨텍스트에 맞추어 사용성을 제공하기 위해 일관성을 포기할 수 도 있다는 점을 잊지말자.


질문 : api를 디자인한다는 것은? 컨텍스트에 적응한다는 것
: 176페이지


## 6.2 적응 가능하게 하기

api 디자인을 적응할 수 있게 만드는 3가지 일반적인 방법은? 177페이지

1. 다른 포맷으로 제공하거나 응답하기
2. 국제화와 현지화
3. 필터, 페이지, 정렬 적용하기

## 6.3 탐색 가능하게 하기

질문: api를 책처럼 탐색할 수 있게 디자인하는 방법은? 187페이지

1. 메타데이터 제공하기
2. 하이퍼미디어 api 만들기
3. http 프로토콜의 장점 이용하기


요약:  
- 동작을 추측할 수 있는 api를 작성하려면 일관된 규칙을 정의하고 일반화된 사례나 표준을 준시하라
- 일관된 api를 디자인하면 api의 사용을 용이하게 할 뿐만 아니라 디자인도 더 단순하게 만든다.
- 항상 api가 다른 표현을 지원하거나 현지화 또는 국제화를 지원해야하는지 확인하라
- 목록 형태의 목표를 제공해야 한다면 페이지, 필터, 정렬 기능이 추가될 수록 사용성이 증진된다.
- 컨슈머에게 api를 안내하기 위해 가능한 많은 메타 데이터를 제공하라
- 항상 프로토콜에서 제공하는 기능 활용을 고려해 api가 예측 가능하게 하고, 사용자가  혼란을 겪지않도록 지나치게 복잡하거나 전혀 익숙치 않은 기능을 제공하라