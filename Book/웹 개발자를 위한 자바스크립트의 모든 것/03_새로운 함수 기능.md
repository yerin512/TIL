# 3. 새로운 함수 기능
화살표 함수, 콜백과 관련된 전체 문제를 해결하는 새로운 형태의 함수 등
최신 자바스크립트 함수의 흥미로운 새 기능을 알아본다.

## 3.1 화살표 함수와 this, super, 그 외

Q. 화살표 함수란?
- ES2015에 추가 됨. 화살표 함수는 특히 콜백을 사용해 전체 문제를 해결함.
간결한 본문과 표준 함수 본문 두 가지 형태로 제공된다.

Q. 콜백 함수란?
- 함수가 끝나고 난 뒤에 실행되는 함수.

- 자바스크립트에서 함수는 객체이다. 따라서 함수는 함수를 인자로 받고 다른 함수를 통해 반환될 수 있다. 인자로 대입되는 함수를 콜백함수라고 부른다.

간결한 화살표 함수는 보통 줄 바꿈 없이 작성 되지만 복잡한 계산이 있을 경우는 줄바꿈을 넣는다.

장황한 양식 주의사항
1. 화살표 바로 뒤에 여는 중괄호가 있다.
2. return을 사용한다.

Q. 콤마 연산자란?
함수에서 할 일이 두세 가지만 있으면 장황한 양식을 사용하지 않기 위해 사용했다.
이상한 연산자 중 하나이다. 왼쪽 피연산자를 평가하고 결괏값을 버리고 오른쪽 피연산자를 평가하고 그 값을 결과로 취한다.

Q. 화살표 함수가 this를 감싼다?
화살표 함수는 자체적으로 this를 가지고 있지 않아서 this에 감싼다.

Q. 화살표 함수는 생성자가 될 수 없다?
화살표 함수는 this를 가지고 있지 않아서 화살표 함수가 생성자 함수가 될 수 없다.
즉 new와 함께 사용할 수 없다.
생성자 함수의 주된 목적은 새로 생성된 객체를 채우는 것.
이는 this를 통해 함수에 전달 된다.
함수에 고유한 것이 없으면 새 객체에 속성을 설정할 수 없고 생성자가 되는 것은 의미가 없다. 명시적으로 혀용되지 않는다. 고로 기존 함수보다 화살표함수가 더 가벼워질 수 있다. 객체가 가진 프로토타입 속성을 가질 필요가 없기 때문이다.

자바스크립트 엔진은 기존 함수를 생성자로 사용할지 여부를 미리 알 수 없기 때문에 생성하는 모든 기존 함수에 참조할 프로토타입 속성과 객체를 넣어야 한다.


## 3.2 기본값 매개변수

Q. 매개변수란?
- 함수는 매개변수를 선언하고 사용한다. 
인수라는 매개변수에 대한 특정 값을 사용하여 해당 함수를 호출한다. 

Q. 기본값 매개변수란?
값이 undefined인 경우 기본값이 적용된다.
매개변수 기본값은 표현식이다.
기본값은 함수를 호출할 수도 있다.
기본 표현식은 함수가 정의될 때가 아니라 함수가 호출 될 때 평가된다.

## 3.3 "나머지" 연산자

Q. 나머지 매개변수란?

```
function example(target, ...sources){
  sources.forEach(source => {
    Object.keys(source).forEach(key => {
      target[key] = source[key]
    })
  })
  return target;
}
const obj = example({}, {a:1}, {b:2});
console.log(obj); // {a: 1, b: 2}
```

## 3.4 매개변수 목록에서 후행 쉼표와 함수 호출

ES2017을 사용하면 매개변수 목록과 인수 목록 끝에 쉼표를 붙일 수 있다.

## 3.5 함수 name 속성

ES2015는 함수 name 속성을 표준화 했다. 익명이었던 많은 함수를 더이상 익명이 아닌 것으로 만든다. 이름을 알게 되면 목적을 파악하는데 편리하고, 특히 오류에 대한 호출 스택에서 유용하다.

```
function foo(){

}
console.log(foo.name); // "foo"

const f = function bar(){

}

console.log(f.name) // "bar"

```

또한, 익명 함수 표현식을 사용하더라도 함수에 이름을 지정할 수 있다. 

```
let foo = function(){

}
console.log(foo.name); // "foo"
```

함수의 이름을 설정하지 않는 작업이 하나 있다. 기존 객체의 객체 속성에 할당하는 것.


## 3.6 블록 내 함수 선언

함수는 단일 블록 내에서만 선언되고 참조된다.
함수는 단일 블록 내에서 선언되고 사용 가능하지만 동일한 블록 내에 포함되지 않은 내부 함수 정의에 의해 참조된다.
함수는 단일 블록 내에서 선언되고 사용 가능하지만 후속 블록 내에서도 참조된다.

## 3.7 과거 습관을 새롭게

과거 습관 1. 다양한 값대신 화살표 함수 사용 해결 방법
- 변수 사용, 즉 var self = this;
- Function.prototype.bind 사용
- 지원한다면 함수의 thisArg 매개변수 사용

화살표 함수로 대체

과거 습관 2. 다양한 값대신 화살표 함수 사용 해결 방법
this 또는 인수를 사용하지 않는 콜백에 기존 함수 사용

-> 가볍고 간결하게 화살표 함수를 사용하자

과거 습관 3. 호출자가 이 값을 제어해야 할 때 화살표 함수를 사용하지말라
호출자가 이것이 무엇인지 제어하는 것이 중요한 콜백으로 전통적인 함수를 사용한다.

-> 계속 그렇게 하자.
어떤 경우네는 유용하지만 때로는 오래된 전통적인 함수가 원하는 것이다.



토론
가볍고 간결하게 화살표 함수를 사용하라고 하는데, 아닌 경우가 있지 않나요?